#delete the '#' start installation of tweepy
# pip install tweepy

#import in our packages 
import os
import tweepy as tw
import pandas as pd

# Consumer keys and access tokens, used for OAuth 
consumer_key = 'XXXXXXXXXXXXXXXXXX'
consumer_secret = 'XXXXXXXXXXXXXXXXXX'
access_token = 'XXXXXXXXXXXXXXXXXX'
access_token_secret = 'XXXXXXXXXXXXXXXXXX'

auth = tw.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
api = tw.API(auth, wait_on_rate_limit=True)


# Define the search term and the date_since date as variables
#in my case im research for these 4 terms below
search_words = "#asianamerican, #kungflu, #chinavirus, #asians"
date_since = "2020-04-01"

# Collect tweets
tweets = tw.Cursor(api.search,
              q=search_words,
              lang="en",
              since=date_since).items(1000)

# Iterate and print tweets
for tweet in tweets:
    print(tweet.text)
    
    
#who is tweeting all this stuff? their location, username 
tweets = tw.Cursor(api.search, 
                           q=search_words,
                           lang="en",
                           since=date_since).items(1000)

users_locs = [[tweet.text, tweet.user.screen_name, tweet.user.location] for tweet in tweets]
users_locs


#saving it as a DataFrame
tweet_text = pd.DataFrame(data=users_locs, 
                    columns=['text','user', "location"])
tweet_text

#saving it to CSV for storage
tweet_text.to_csv('importantfile1.csv')

